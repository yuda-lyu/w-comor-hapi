/*!
 * w-comor-hapi-server v1.0.33
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("@hapi/hapi")):"function"==typeof define&&define.amd?define(["@hapi/hapi"],r):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-comor-hapi-server"]=r(t["@hapi/hapi"])}(this,(function(t){"use strict";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var n=function(){this.__data__=[],this.size=0};var o=function(t,r){return t===r||t!=t&&r!=r},u=o;var a=function(t,r){for(var e=t.length;e--;)if(u(t[e][0],r))return e;return-1},i=a,c=Array.prototype.splice;var f=a;var s=a;var l=a;var v=n,p=function(t){var r=this.__data__,e=i(r,t);return!(e<0)&&(e==r.length-1?r.pop():c.call(r,e,1),--this.size,!0)},b=function(t){var r=this.__data__,e=f(r,t);return e<0?void 0:r[e][1]},h=function(t){return s(this.__data__,t)>-1},y=function(t,r){var e=this.__data__,n=l(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function j(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}j.prototype.clear=v,j.prototype.delete=p,j.prototype.get=b,j.prototype.has=h,j.prototype.set=y;var d=j,g=d;var _=function(){this.__data__=new g,this.size=0};var O=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e};var w=function(t){return this.__data__.get(t)};var m=function(t){return this.__data__.has(t)},A="object"==typeof r&&r&&r.Object===Object&&r,S=A,x="object"==typeof self&&self&&self.Object===Object&&self,z=S||x||Function("return this")(),P=z.Symbol,I=P,F=Object.prototype,N=F.hasOwnProperty,E=F.toString,k=I?I.toStringTag:void 0;var M=function(t){var r=N.call(t,k),e=t[k];try{t[k]=void 0;var n=!0}catch(t){}var o=E.call(t);return n&&(r?t[k]=e:delete t[k]),o},T=Object.prototype.toString;var U=M,$=function(t){return T.call(t)},B=P?P.toStringTag:void 0;var C=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":B&&B in Object(t)?U(t):$(t)};var D=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)},L=C,R=D;var V,W=function(t){if(!R(t))return!1;var r=L(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r},q=z["__core-js_shared__"],G=(V=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"";var H=function(t){return!!G&&G in t},J=Function.prototype.toString;var K=function(t){if(null!=t){try{return J.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Q=W,X=H,Y=D,Z=K,tt=/^\[object .+?Constructor\]$/,rt=Function.prototype,et=Object.prototype,nt=rt.toString,ot=et.hasOwnProperty,ut=RegExp("^"+nt.call(ot).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var at=function(t){return!(!Y(t)||X(t))&&(Q(t)?ut:tt).test(Z(t))},it=function(t,r){return null==t?void 0:t[r]};var ct=function(t,r){var e=it(t,r);return at(e)?e:void 0},ft=ct(z,"Map"),st=ct(Object,"create"),lt=st;var vt=function(){this.__data__=lt?lt(null):{},this.size=0};var pt=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},bt=st,ht=Object.prototype.hasOwnProperty;var yt=function(t){var r=this.__data__;if(bt){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return ht.call(r,t)?r[t]:void 0},jt=st,dt=Object.prototype.hasOwnProperty;var gt=st;var _t=vt,Ot=pt,wt=yt,mt=function(t){var r=this.__data__;return jt?void 0!==r[t]:dt.call(r,t)},At=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=gt&&void 0===r?"__lodash_hash_undefined__":r,this};function St(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}St.prototype.clear=_t,St.prototype.delete=Ot,St.prototype.get=wt,St.prototype.has=mt,St.prototype.set=At;var xt=St,zt=d,Pt=ft;var It=function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var Ft=function(t,r){var e=t.__data__;return It(r)?e["string"==typeof r?"string":"hash"]:e.map},Nt=Ft;var Et=Ft;var kt=Ft;var Mt=Ft;var Tt=function(){this.size=0,this.__data__={hash:new xt,map:new(Pt||zt),string:new xt}},Ut=function(t){var r=Nt(this,t).delete(t);return this.size-=r?1:0,r},$t=function(t){return Et(this,t).get(t)},Bt=function(t){return kt(this,t).has(t)},Ct=function(t,r){var e=Mt(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function Dt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Dt.prototype.clear=Tt,Dt.prototype.delete=Ut,Dt.prototype.get=$t,Dt.prototype.has=Bt,Dt.prototype.set=Ct;var Lt=Dt,Rt=d,Vt=ft,Wt=Lt;var qt=d,Gt=_,Ht=O,Jt=w,Kt=m,Qt=function(t,r){var e=this.__data__;if(e instanceof Rt){var n=e.__data__;if(!Vt||n.length<199)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new Wt(n)}return e.set(t,r),this.size=e.size,this};function Xt(t){var r=this.__data__=new qt(t);this.size=r.size}Xt.prototype.clear=Gt,Xt.prototype.delete=Ht,Xt.prototype.get=Jt,Xt.prototype.has=Kt,Xt.prototype.set=Qt;var Yt=Xt;var Zt=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==r(t[e],e,t););return t},tr=ct,rr=function(){try{var t=tr(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var er=function(t,r,e){"__proto__"==r&&rr?rr(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e},nr=er,or=o,ur=Object.prototype.hasOwnProperty;var ar=function(t,r,e){var n=t[r];ur.call(t,r)&&or(n,e)&&(void 0!==e||r in t)||nr(t,r,e)},ir=ar,cr=er;var fr=function(t,r,e,n){var o=!e;e||(e={});for(var u=-1,a=r.length;++u<a;){var i=r[u],c=n?n(e[i],t[i],i,e,t):void 0;void 0===c&&(c=t[i]),o?cr(e,i,c):ir(e,i,c)}return e};var sr=function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n};var lr=function(t){return null!=t&&"object"==typeof t},vr=C,pr=lr;var br=function(t){return pr(t)&&"[object Arguments]"==vr(t)},hr=lr,yr=Object.prototype,jr=yr.hasOwnProperty,dr=yr.propertyIsEnumerable,gr=br(function(){return arguments}())?br:function(t){return hr(t)&&jr.call(t,"callee")&&!dr.call(t,"callee")},_r=gr,Or=Array.isArray,wr={};var mr=function(){return!1};!function(t,r){var e=z,n=mr,o=r&&!r.nodeType&&r,u=o&&t&&!t.nodeType&&t,a=u&&u.exports===o?e.Buffer:void 0,i=(a?a.isBuffer:void 0)||n;t.exports=i}({get exports(){return wr},set exports(t){wr=t}},wr);var Ar=/^(?:0|[1-9]\d*)$/;var Sr=function(t,r){var e=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&Ar.test(t))&&t>-1&&t%1==0&&t<r};var xr=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},zr=C,Pr=xr,Ir=lr,Fr={};Fr["[object Float32Array]"]=Fr["[object Float64Array]"]=Fr["[object Int8Array]"]=Fr["[object Int16Array]"]=Fr["[object Int32Array]"]=Fr["[object Uint8Array]"]=Fr["[object Uint8ClampedArray]"]=Fr["[object Uint16Array]"]=Fr["[object Uint32Array]"]=!0,Fr["[object Arguments]"]=Fr["[object Array]"]=Fr["[object ArrayBuffer]"]=Fr["[object Boolean]"]=Fr["[object DataView]"]=Fr["[object Date]"]=Fr["[object Error]"]=Fr["[object Function]"]=Fr["[object Map]"]=Fr["[object Number]"]=Fr["[object Object]"]=Fr["[object RegExp]"]=Fr["[object Set]"]=Fr["[object String]"]=Fr["[object WeakMap]"]=!1;var Nr=function(t){return Ir(t)&&Pr(t.length)&&!!Fr[zr(t)]};var Er=function(t){return function(r){return t(r)}},kr={};!function(t,r){var e=A,n=r&&!r.nodeType&&r,o=n&&t&&!t.nodeType&&t,u=o&&o.exports===n&&e.process,a=function(){try{var t=o&&o.require&&o.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=a}({get exports(){return kr},set exports(t){kr=t}},kr);var Mr=Nr,Tr=Er,Ur=kr&&kr.isTypedArray,$r=Ur?Tr(Ur):Mr,Br=sr,Cr=_r,Dr=Or,Lr=wr,Rr=Sr,Vr=$r,Wr=Object.prototype.hasOwnProperty;var qr=function(t,r){var e=Dr(t),n=!e&&Cr(t),o=!e&&!n&&Lr(t),u=!e&&!n&&!o&&Vr(t),a=e||n||o||u,i=a?Br(t.length,String):[],c=i.length;for(var f in t)!r&&!Wr.call(t,f)||a&&("length"==f||o&&("offset"==f||"parent"==f)||u&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Rr(f,c))||i.push(f);return i},Gr=Object.prototype;var Hr=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||Gr)};var Jr=function(t,r){return function(e){return t(r(e))}},Kr=Jr(Object.keys,Object),Qr=Hr,Xr=Kr,Yr=Object.prototype.hasOwnProperty;var Zr=W,te=xr;var re=function(t){return null!=t&&te(t.length)&&!Zr(t)},ee=qr,ne=function(t){if(!Qr(t))return Xr(t);var r=[];for(var e in Object(t))Yr.call(t,e)&&"constructor"!=e&&r.push(e);return r},oe=re;var ue=function(t){return oe(t)?ee(t):ne(t)},ae=fr,ie=ue;var ce=function(t,r){return t&&ae(r,ie(r),t)};var fe=D,se=Hr,le=function(t){var r=[];if(null!=t)for(var e in Object(t))r.push(e);return r},ve=Object.prototype.hasOwnProperty;var pe=qr,be=function(t){if(!fe(t))return le(t);var r=se(t),e=[];for(var n in t)("constructor"!=n||!r&&ve.call(t,n))&&e.push(n);return e},he=re;var ye=function(t){return he(t)?pe(t,!0):be(t)},je=fr,de=ye;var ge=function(t,r){return t&&je(r,de(r),t)},_e={};!function(t,r){var e=z,n=r&&!r.nodeType&&r,o=n&&t&&!t.nodeType&&t,u=o&&o.exports===n?e.Buffer:void 0,a=u?u.allocUnsafe:void 0;t.exports=function(t,r){if(r)return t.slice();var e=t.length,n=a?a(e):new t.constructor(e);return t.copy(n),n}}({get exports(){return _e},set exports(t){_e=t}},_e);var Oe=function(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r};var we=function(){return[]},me=function(t,r){for(var e=-1,n=null==t?0:t.length,o=0,u=[];++e<n;){var a=t[e];r(a,e,t)&&(u[o++]=a)}return u},Ae=we,Se=Object.prototype.propertyIsEnumerable,xe=Object.getOwnPropertySymbols,ze=xe?function(t){return null==t?[]:(t=Object(t),me(xe(t),(function(r){return Se.call(t,r)})))}:Ae,Pe=fr,Ie=ze;var Fe=function(t,r){return Pe(t,Ie(t),r)};var Ne=function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t},Ee=Jr(Object.getPrototypeOf,Object),ke=Ne,Me=Ee,Te=ze,Ue=we,$e=Object.getOwnPropertySymbols?function(t){for(var r=[];t;)ke(r,Te(t)),t=Me(t);return r}:Ue,Be=fr,Ce=$e;var De=function(t,r){return Be(t,Ce(t),r)},Le=Ne,Re=Or;var Ve=function(t,r,e){var n=r(t);return Re(t)?n:Le(n,e(t))},We=Ve,qe=ze,Ge=ue;var He=function(t){return We(t,Ge,qe)},Je=Ve,Ke=$e,Qe=ye;var Xe=function(t){return Je(t,Qe,Ke)},Ye=ct(z,"DataView"),Ze=ct(z,"Promise"),tn=ct(z,"Set"),rn=Ye,en=ft,nn=Ze,on=tn,un=ct(z,"WeakMap"),an=C,cn=K,fn="[object Map]",sn="[object Promise]",ln="[object Set]",vn="[object WeakMap]",pn="[object DataView]",bn=cn(rn),hn=cn(en),yn=cn(nn),jn=cn(on),dn=cn(un),gn=an;(rn&&gn(new rn(new ArrayBuffer(1)))!=pn||en&&gn(new en)!=fn||nn&&gn(nn.resolve())!=sn||on&&gn(new on)!=ln||un&&gn(new un)!=vn)&&(gn=function(t){var r=an(t),e="[object Object]"==r?t.constructor:void 0,n=e?cn(e):"";if(n)switch(n){case bn:return pn;case hn:return fn;case yn:return sn;case jn:return ln;case dn:return vn}return r});var _n=gn,On=Object.prototype.hasOwnProperty;var wn=function(t){var r=t.length,e=new t.constructor(r);return r&&"string"==typeof t[0]&&On.call(t,"index")&&(e.index=t.index,e.input=t.input),e},mn=z.Uint8Array,An=mn;var Sn=function(t){var r=new t.constructor(t.byteLength);return new An(r).set(new An(t)),r},xn=Sn;var zn=function(t,r){var e=r?xn(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)},Pn=/\w*$/;var In=function(t){var r=new t.constructor(t.source,Pn.exec(t));return r.lastIndex=t.lastIndex,r},Fn=P?P.prototype:void 0,Nn=Fn?Fn.valueOf:void 0;var En=Sn;var kn=Sn,Mn=zn,Tn=In,Un=function(t){return Nn?Object(Nn.call(t)):{}},$n=function(t,r){var e=r?En(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)};var Bn=function(t,r,e){var n=t.constructor;switch(r){case"[object ArrayBuffer]":return kn(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return Mn(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return $n(t,e);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return Tn(t);case"[object Symbol]":return Un(t)}},Cn=D,Dn=Object.create,Ln=function(){function t(){}return function(r){if(!Cn(r))return{};if(Dn)return Dn(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}(),Rn=Ee,Vn=Hr;var Wn=function(t){return"function"!=typeof t.constructor||Vn(t)?{}:Ln(Rn(t))},qn=_n,Gn=lr;var Hn=function(t){return Gn(t)&&"[object Map]"==qn(t)},Jn=Er,Kn=kr&&kr.isMap,Qn=Kn?Jn(Kn):Hn,Xn=_n,Yn=lr;var Zn=function(t){return Yn(t)&&"[object Set]"==Xn(t)},to=Er,ro=kr&&kr.isSet,eo=ro?to(ro):Zn,no=Yt,oo=Zt,uo=ar,ao=ce,io=ge,co=_e,fo=Oe,so=Fe,lo=De,vo=He,po=Xe,bo=_n,ho=wn,yo=Bn,jo=Wn,go=Or,_o=wr,Oo=Qn,wo=D,mo=eo,Ao=ue,So=ye,xo="[object Arguments]",zo="[object Function]",Po="[object Object]",Io={};Io[xo]=Io["[object Array]"]=Io["[object ArrayBuffer]"]=Io["[object DataView]"]=Io["[object Boolean]"]=Io["[object Date]"]=Io["[object Float32Array]"]=Io["[object Float64Array]"]=Io["[object Int8Array]"]=Io["[object Int16Array]"]=Io["[object Int32Array]"]=Io["[object Map]"]=Io["[object Number]"]=Io[Po]=Io["[object RegExp]"]=Io["[object Set]"]=Io["[object String]"]=Io["[object Symbol]"]=Io["[object Uint8Array]"]=Io["[object Uint8ClampedArray]"]=Io["[object Uint16Array]"]=Io["[object Uint32Array]"]=!0,Io["[object Error]"]=Io[zo]=Io["[object WeakMap]"]=!1;var Fo=function t(r,e,n,o,u,a){var i,c=1&e,f=2&e,s=4&e;if(n&&(i=u?n(r,o,u,a):n(r)),void 0!==i)return i;if(!wo(r))return r;var l=go(r);if(l){if(i=ho(r),!c)return fo(r,i)}else{var v=bo(r),p=v==zo||"[object GeneratorFunction]"==v;if(_o(r))return co(r,c);if(v==Po||v==xo||p&&!u){if(i=f||p?{}:jo(r),!c)return f?lo(r,io(i,r)):so(r,ao(i,r))}else{if(!Io[v])return u?r:{};i=yo(r,v,c)}}a||(a=new no);var b=a.get(r);if(b)return b;a.set(r,i),mo(r)?r.forEach((function(o){i.add(t(o,e,n,o,r,a))})):Oo(r)&&r.forEach((function(o,u){i.set(u,t(o,e,n,u,r,a))}));var h=l?void 0:(s?f?po:vo:f?So:Ao)(r);return oo(h||r,(function(o,u){h&&(o=r[u=o]),uo(i,u,t(o,e,n,u,r,a))})),i},No=Fo;var Eo=function(t){return No(t,5)},ko=C,Mo=lr;var To=function(t){return"symbol"==typeof t||Mo(t)&&"[object Symbol]"==ko(t)},Uo=Or,$o=To,Bo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Co=/^\w*$/;var Do=function(t,r){if(Uo(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!$o(t))||(Co.test(t)||!Bo.test(t)||null!=r&&t in Object(r))},Lo=Lt;function Ro(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],u=e.cache;if(u.has(o))return u.get(o);var a=t.apply(this,n);return e.cache=u.set(o,a)||u,a};return e.cache=new(Ro.Cache||Lo),e}Ro.Cache=Lo;var Vo=Ro;var Wo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qo=/\\(\\)?/g,Go=function(t){var r=Vo(t,(function(t){return 500===e.size&&e.clear(),t})),e=r.cache;return r}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(Wo,(function(t,e,n,o){r.push(n?o.replace(qo,"$1"):e||t)})),r}));var Ho=function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o},Jo=Or,Ko=To,Qo=P?P.prototype:void 0,Xo=Qo?Qo.toString:void 0;var Yo=function t(r){if("string"==typeof r)return r;if(Jo(r))return Ho(r,t)+"";if(Ko(r))return Xo?Xo.call(r):"";var e=r+"";return"0"==e&&1/r==-Infinity?"-0":e},Zo=Yo;var tu=function(t){return null==t?"":Zo(t)},ru=Or,eu=Do,nu=Go,ou=tu;var uu=function(t,r){return ru(t)?t:eu(t,r)?[t]:nu(ou(t))},au=To;var iu=function(t){if("string"==typeof t||au(t))return t;var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r},cu=uu,fu=iu;var su=function(t,r){for(var e=0,n=(r=cu(r,t)).length;null!=t&&e<n;)t=t[fu(r[e++])];return e&&e==n?t:void 0},lu=su;var vu=function(t,r,e){var n=null==t?void 0:lu(t,r);return void 0===n?e:n};var pu=Lt,bu=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},hu=function(t){return this.__data__.has(t)};function yu(t){var r=-1,e=null==t?0:t.length;for(this.__data__=new pu;++r<e;)this.add(t[r])}yu.prototype.add=yu.prototype.push=bu,yu.prototype.has=hu;var ju=yu;var du=function(t,r){return t.has(r)},gu=ju,_u=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1},Ou=du;var wu=function(t,r,e,n,o,u){var a=1&e,i=t.length,c=r.length;if(i!=c&&!(a&&c>i))return!1;var f=u.get(t),s=u.get(r);if(f&&s)return f==r&&s==t;var l=-1,v=!0,p=2&e?new gu:void 0;for(u.set(t,r),u.set(r,t);++l<i;){var b=t[l],h=r[l];if(n)var y=a?n(h,b,l,r,t,u):n(b,h,l,t,r,u);if(void 0!==y){if(y)continue;v=!1;break}if(p){if(!_u(r,(function(t,r){if(!Ou(p,r)&&(b===t||o(b,t,e,n,u)))return p.push(r)}))){v=!1;break}}else if(b!==h&&!o(b,h,e,n,u)){v=!1;break}}return u.delete(t),u.delete(r),v};var mu=function(t){var r=-1,e=Array(t.size);return t.forEach((function(t){e[++r]=t})),e},Au=mn,Su=o,xu=wu,zu=function(t){var r=-1,e=Array(t.size);return t.forEach((function(t,n){e[++r]=[n,t]})),e},Pu=mu,Iu=P?P.prototype:void 0,Fu=Iu?Iu.valueOf:void 0;var Nu=function(t,r,e,n,o,u,a){switch(e){case"[object DataView]":if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=r.byteLength||!u(new Au(t),new Au(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Su(+t,+r);case"[object Error]":return t.name==r.name&&t.message==r.message;case"[object RegExp]":case"[object String]":return t==r+"";case"[object Map]":var i=zu;case"[object Set]":var c=1&n;if(i||(i=Pu),t.size!=r.size&&!c)return!1;var f=a.get(t);if(f)return f==r;n|=2,a.set(t,r);var s=xu(i(t),i(r),n,o,u,a);return a.delete(t),s;case"[object Symbol]":if(Fu)return Fu.call(t)==Fu.call(r)}return!1},Eu=He,ku=Object.prototype.hasOwnProperty;var Mu=Yt,Tu=wu,Uu=Nu,$u=function(t,r,e,n,o,u){var a=1&e,i=Eu(t),c=i.length;if(c!=Eu(r).length&&!a)return!1;for(var f=c;f--;){var s=i[f];if(!(a?s in r:ku.call(r,s)))return!1}var l=u.get(t),v=u.get(r);if(l&&v)return l==r&&v==t;var p=!0;u.set(t,r),u.set(r,t);for(var b=a;++f<c;){var h=t[s=i[f]],y=r[s];if(n)var j=a?n(y,h,s,r,t,u):n(h,y,s,t,r,u);if(!(void 0===j?h===y||o(h,y,e,n,u):j)){p=!1;break}b||(b="constructor"==s)}if(p&&!b){var d=t.constructor,g=r.constructor;d==g||!("constructor"in t)||!("constructor"in r)||"function"==typeof d&&d instanceof d&&"function"==typeof g&&g instanceof g||(p=!1)}return u.delete(t),u.delete(r),p},Bu=_n,Cu=Or,Du=wr,Lu=$r,Ru="[object Arguments]",Vu="[object Array]",Wu="[object Object]",qu=Object.prototype.hasOwnProperty;var Gu=function(t,r,e,n,o,u){var a=Cu(t),i=Cu(r),c=a?Vu:Bu(t),f=i?Vu:Bu(r),s=(c=c==Ru?Wu:c)==Wu,l=(f=f==Ru?Wu:f)==Wu,v=c==f;if(v&&Du(t)){if(!Du(r))return!1;a=!0,s=!1}if(v&&!s)return u||(u=new Mu),a||Lu(t)?Tu(t,r,e,n,o,u):Uu(t,r,c,e,n,o,u);if(!(1&e)){var p=s&&qu.call(t,"__wrapped__"),b=l&&qu.call(r,"__wrapped__");if(p||b){var h=p?t.value():t,y=b?r.value():r;return u||(u=new Mu),o(h,y,e,n,u)}}return!!v&&(u||(u=new Mu),$u(t,r,e,n,o,u))},Hu=lr;var Ju=function t(r,e,n,o,u){return r===e||(null==r||null==e||!Hu(r)&&!Hu(e)?r!=r&&e!=e:Gu(r,e,n,o,t,u))},Ku=Yt,Qu=Ju;var Xu=D;var Yu=function(t){return t==t&&!Xu(t)},Zu=Yu,ta=ue;var ra=function(t,r){return function(e){return null!=e&&(e[t]===r&&(void 0!==r||t in Object(e)))}},ea=function(t,r,e,n){var o=e.length,u=o,a=!n;if(null==t)return!u;for(t=Object(t);o--;){var i=e[o];if(a&&i[2]?i[1]!==t[i[0]]:!(i[0]in t))return!1}for(;++o<u;){var c=(i=e[o])[0],f=t[c],s=i[1];if(a&&i[2]){if(void 0===f&&!(c in t))return!1}else{var l=new Ku;if(n)var v=n(f,s,c,t,r,l);if(!(void 0===v?Qu(s,f,3,n,l):v))return!1}}return!0},na=function(t){for(var r=ta(t),e=r.length;e--;){var n=r[e],o=t[n];r[e]=[n,o,Zu(o)]}return r},oa=ra;var ua=uu,aa=_r,ia=Or,ca=Sr,fa=xr,sa=iu;var la=function(t,r){return null!=t&&r in Object(t)},va=function(t,r,e){for(var n=-1,o=(r=ua(r,t)).length,u=!1;++n<o;){var a=sa(r[n]);if(!(u=null!=t&&e(t,a)))break;t=t[a]}return u||++n!=o?u:!!(o=null==t?0:t.length)&&fa(o)&&ca(a,o)&&(ia(t)||aa(t))};var pa=Ju,ba=vu,ha=function(t,r){return null!=t&&va(t,r,la)},ya=Do,ja=Yu,da=ra,ga=iu;var _a=function(t){return t};var Oa=su;var wa=function(t){return function(r){return null==r?void 0:r[t]}},ma=function(t){return function(r){return Oa(r,t)}},Aa=Do,Sa=iu;var xa=function(t){var r=na(t);return 1==r.length&&r[0][2]?oa(r[0][0],r[0][1]):function(e){return e===t||ea(e,t,r)}},za=function(t,r){return ya(t)&&ja(r)?da(ga(t),r):function(e){var n=ba(e,t);return void 0===n&&n===r?ha(e,t):pa(r,n,3)}},Pa=_a,Ia=Or,Fa=function(t){return Aa(t)?wa(Sa(t)):ma(t)};var Na=function(t){return"function"==typeof t?t:null==t?Pa:"object"==typeof t?Ia(t)?za(t[0],t[1]):xa(t):Fa(t)};var Ea=function(t,r,e,n){for(var o=t.length,u=e+(n?1:-1);n?u--:++u<o;)if(r(t[u],u,t))return u;return-1},ka=function(t){return t!=t},Ma=function(t,r,e){for(var n=e-1,o=t.length;++n<o;)if(t[n]===r)return n;return-1};var Ta=function(t,r,e){return r==r?Ma(t,r,e):Ea(t,ka,e)};var Ua=function(t,r){return!!(null==t?0:t.length)&&Ta(t,r,0)>-1};var $a=function(t,r,e){for(var n=-1,o=null==t?0:t.length;++n<o;)if(e(r,t[n]))return!0;return!1};var Ba=tn,Ca=function(){},Da=Ba&&1/mu(new Ba([,-0]))[1]==1/0?function(t){return new Ba(t)}:Ca,La=ju,Ra=Ua,Va=$a,Wa=du,qa=Da,Ga=mu;var Ha=Na,Ja=function(t,r,e){var n=-1,o=Ra,u=t.length,a=!0,i=[],c=i;if(e)a=!1,o=Va;else if(u>=200){var f=r?null:qa(t);if(f)return Ga(f);a=!1,o=Wa,c=new La}else c=r?[]:i;t:for(;++n<u;){var s=t[n],l=r?r(s):s;if(s=e||0!==s?s:0,a&&l==l){for(var v=c.length;v--;)if(c[v]===l)continue t;r&&c.push(l),i.push(s)}else o(c,l,e)||(c!==i&&c.push(l),i.push(s))}return i};var Ka=function(t,r){return t&&t.length?Ja(t,Ha(r)):[]},Qa=Ju;var Xa=function(t,r){return Qa(t,r)},Ya={},Za={get exports(){return Ya},set exports(t){Ya=t}};var ti=function(t){return function(r,e,n){for(var o=-1,u=Object(r),a=n(r),i=a.length;i--;){var c=a[t?i:++o];if(!1===e(u[c],c,u))break}return r}}(),ri=ue;var ei=re;var ni=function(t,r){return function(e,n){if(null==e)return e;if(!ei(e))return t(e,n);for(var o=e.length,u=r?o:-1,a=Object(e);(r?u--:++u<o)&&!1!==n(a[u],u,a););return e}}((function(t,r){return t&&ti(t,r,ri)})),oi=_a;var ui=Zt,ai=ni,ii=function(t){return"function"==typeof t?t:oi},ci=Or;var fi=function(t,r){return(ci(t)?ui:ai)(t,ii(r))};!function(t){t.exports=fi}(Za);var si=e(Ya);function li(){let t,r,e=new Promise((function(){t=arguments[0],r=arguments[1]}));return e.resolve=t,e.reject=r,e}var vi=/\s/;var pi=function(t){for(var r=t.length;r--&&vi.test(t.charAt(r)););return r},bi=/^\s+/;var hi=function(t){return t?t.slice(0,pi(t)+1).replace(bi,""):t},yi=D,ji=To,di=/^[-+]0x[0-9a-f]+$/i,gi=/^0b[01]+$/i,_i=/^0o[0-7]+$/i,Oi=parseInt;var wi=function(t){if("number"==typeof t)return t;if(ji(t))return NaN;if(yi(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=yi(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=hi(t);var e=gi.test(t);return e||_i.test(t)?Oi(t.slice(2),e?2:8):di.test(t)?NaN:+t},mi=wi,Ai=1/0;var Si=function(t){return t?(t=mi(t))===Ai||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},xi=Si;var zi=function(t){var r=xi(t),e=r%1;return r==r?e?r-e:r:0},Pi=zi;var Ii=function(t){return"number"==typeof t&&t==Pi(t)};function Fi(t){return"[object String]"===Object.prototype.toString.call(t)}function Ni(t){return!(!Fi(t)||""===t)}function Ei(t){let r=!1;return Ni(t)?r=!isNaN(Number(t)):function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)&&(r=!0),r}function ki(t){if(!Ei(t))return 0;return Si(t)}var Mi=zi,Ti=wi,Ui=tu,$i=z.isFinite,Bi=Math.min;var Ci=function(t){var r=Math[t];return function(t,e){if(t=Ti(t),(e=null==e?0:Bi(Mi(e),292))&&$i(t)){var n=(Ui(t)+"e").split("e"),o=r(n[0]+"e"+(+n[1]+e));return+((n=(Ui(o)+"e").split("e"))[0]+"e"+(+n[1]-e))}return r(t)}}("round");function Di(t){if(!Ei(t))return 0;t=ki(t);let r=Ci(t);return"0"===String(r)?0:r}function Li(t){if(!function(t){return!!Ei(t)&&(t=ki(t),Ii(t))}(t))return!1;return Di(t)>0}let Ri="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Vi=Ri.length;function Wi(t){return"[object Object]"===Object.prototype.toString.call(t)}function qi(t){let r=Object.prototype.toString.call(t);return"[object Function]"===r||"[object AsyncFunction]"===r}function Gi(t){return"[object Array]"===Object.prototype.toString.call(t)}function Hi(t){return!!function(t){return"[object Undefined]"===Object.prototype.toString.call(t)}(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!function(t){if(Wi(t)){for(let r in t)return!1;return!0}return!1}(t)||(!!function(t){return!(!Fi(t)||""!==t)}(t)||!!function(t){return!!Gi(t)&&0===t.length}(t))))}return function(r){let e=[],n=[];(r=Eo(r)).port||(r.port=8080),r.apiName||(r.apiName="api"),r.routes||(r.routes=[]);let o=[];var u,a;async function i(t){let e=vu(t,"token",""),n=await function(t){let e=li();return qi(r.authenticate)?r.authenticate(t).then((function(t){e.resolve(t)})):e.resolve(!0),e}(e);if(n){let n=vu(t,"func",""),u=vu(t,"input");if("getFuncs"===n)qi(r.filterFuncs)&&(o=await r.filterFuncs(e,o)),t.output={sys:"sys",funcs:o};else if(function(t,r){function e(t){return Gi(t)?t:[t]}if(Hi(t))return!1;if(0===(t=e(t)).length)return!1;if(Hi(t))return!1;if(0===(r=e(r)).length)return!1;for(let e=0;e<t.length;e++)for(let n=0;n<r.length;n++)if(Xa(t[e],r[n]))return!0;return!1}(o,n)){let e=await r.funcs[n](u);t.output=e}else t.output={err:`can not find: ${n}`}}else t.output={err:`can not authenticate token: ${e}`};return delete t.input,JSON.stringify(t)}function c(t){if(qi(r.onClientChange)){let e=Ka(t,"clientId");Xa(n,e)||(n=e,r.onClientChange(n,r))}}a="funcs",Wi(u=r)&&(Ni(a)||Ei(a))&&a in u&&(o=ue(r.funcs));let f={path:"/"+r.apiName,method:"POST",options:{payload:{maxBytes:1048576e3,timeout:18e4,multipart:!0},timeout:{socket:3e5}},handler:function(t,r){let n=li(),o=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,r=[];t=Li(t)?Di(t):32;for(let e=0;e<t;e++)r[e]=Ri[0|Math.random()*Vi];return r.join("")}(),u=vu(t.payload,"clientId"),a={headers:t.headers,info:t.info};return e.push({clientId:u,connId:o,data:a}),c(e),i(t.payload).then((function(t){n.resolve(t)})).catch((function(t){n.reject(t)})).finally((function(){e=e.filter((function(t){return t.connId!==o})),c(e)})),n}};r.serverHapi?r.serverHapi.route(f):async function(){let e=t.server({port:r.port,routes:{cors:!0}});e.route(f),si(r.routes,(function(t){e.route(t)})),await e.start(),console.log(`Server running at: ${e.info.uri}`)}()}}));
//# sourceMappingURL=w-comor-hapi-server.umd.js.map
